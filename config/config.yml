# === Global Config for Career Assistant ===

# --- Paths ---
paths:
  base_dir: "career_assistant"
  raw_data: "career_assistant/data/raw/"
  processed_data: "career_assistant/data/processed/"
  vector_store: "career_assistant/data/vector_store/default/"
  model_dir: "career_assistant/artifacts/models/"
  qdrant_storage: "./qdrant_storage/"

# --- Embeddings ---
embedding:
  model_name: "sentence-transformers/intfloat/e5-base-v2"
  dim: 384

# --- Qdrant Vector Database ---
qdrant:
  host: "localhost"
  port: 6333
  collection_name: "career_vectors"
  distance_metric: "Cosine"
  recreate_collection: false
  replication_factor: 1
  shard_number: 1
  timeout: 30
  max_retries: 3

# --- Semantic Matching ---
semantic_matching:
  batch_size: 64
  top_n: 5
  similarity_threshold: 0.75
  use_qdrant: true
  save_embeddings: true

# --- RAG Pipeline ---
retriever:
  top_k: 5
  similarity_metric: "cosine"

generator:
  model_name: "google/flan-t5-small"
  max_length: 200
  min_length: 60
  temperature: 0.7
  top_p: 0.9

# --- Postgres Database ---
postgres:
  user: "mlflow"
  password: "mlflowpass"
  db: "mlflow_db"
  host: "postgres"   # matches docker-compose service name
  port: 5432

# --- MLflow Tracking ---
mlflow:
  tracking_uri: "http://mlflow:5000"  # use Docker service name, not localhost
  backend_store_uri: "postgresql://mlflow:mlflowpass@postgres:5432/mlflow_db"
  experiment_name: "rag_pipeline"
  
# --- Docker ---
docker:
  image_name: "career_assistant"
  dev:
    host_port: 8000
    container_port: 8080
  staging:
    host_port: 8081
    container_port: 8080
  production:
    host_port: 8080
    container_port: 8080

# --- Logging ---
logging:
  level: "INFO"
  log_to_file: true
  log_file: "logs/app.log"
  log_to_console: true
  max_bytes: 5242880  # 5MB
  backup_count: 5

# --- Environment ---
environment: "dev"  # options: dev | staging | production

# --- Environment-specific overrides ---
environments:
  dev:
    semantic_matching:
      batch_size: 16
      top_n: 3
    generator:
      max_length: 150
      min_length: 40
    logging:
      level: "DEBUG"
  staging:
    semantic_matching:
      batch_size: 32
      top_n: 5
    generator:
      max_length: 200
      min_length: 60
    logging:
      level: "INFO"
  production:
    semantic_matching:
      batch_size: 64
      top_n: 10
    generator:
      max_length: 300
      min_length: 100
    logging:
      level: "WARNING"
    qdrant:
      timeout: 60
      max_retries: 5
